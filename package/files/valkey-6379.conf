# Valkey configuration for RMT - Port 6379
# Path: /usr/share/rmt/config/valkey-6379.conf

################################## SECURITY ###################################
bind 127.0.0.1
protected-mode yes
port 6379

################################## GENERAL ####################################
daemonize no
supervised systemd
loglevel notice
logfile ""

############################### PERSISTENCE #################################
# Sidekiq uses Redis/Valkey for job data, so we need some durability.
save 900 1
save 300 10
save 60 10000
appendonly yes
appendfilename "appendonly.aof"
dir /var/lib/valkey/6379

############################# MEMORY MANAGEMENT ###############################
# RMT background jobs are low volume, but we should set a cap.
maxmemory 512mb
maxmemory-policy noeviction

############################### PERFORMANCE #################################
tcp-keepalive 300
